<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="description" content="人若无名，则潜心练剑">


    <meta name="keywords" content="个人博客,JAVA,后端技术">


<title>Git从入门到退坑 | 羅小生的博客</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">羅小生的博客</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">羅小生的博客</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Git从入门到退坑</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">羅小生</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">八月 23, 2019&nbsp;&nbsp;17:56:03</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/category/工具/">工具</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <p><img src="/2019/08/23/Git从入门到退坑/yancy-min-842ofHC6MaI-unsplash.jpg" alt="yancy-min-842ofHC6MaI-unsplash"></p>
<h2 id="Git简介"><a href="#Git简介" class="headerlink" title="Git简介"></a>Git简介</h2><p><code>Git</code> 是一种分布式版本控制系统，它可以不受网络连接的限制，加上其它众多优点，目前已经成为程序开发人员做项目版本管理时的首选，非开发人员也可以用 <code>Git</code> 来做自己的文档版本管理工具。</p>
<p><code>Git</code> 的api很多，但其实平时项目中90%的需求都只需要用到几个基本的功能即可，所以本文将从 <code>实用主义</code> 和 <code>深入探索</code> 2个方面去谈谈如何在项目中使用 <code>Git</code>，一般来说，看完 <code>实用主义</code> 这一节就可以开始在项目中动手用。</p>
<a id="more"></a>
<h2 id="实用主义"><a href="#实用主义" class="headerlink" title="实用主义"></a>实用主义</h2><h3 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段"></a>准备阶段</h3><p>进入 Git官网下载合适你的安装包，当前我下载到的版本是 <code>2.23.0</code>，本文也将在这个版本上演示效果。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569212636648.png" alt="Latest git release"></p>
<p>安装好 <code>Git</code> 后，打开命令行工具，进入工作文件夹（<em>为了便于理解，我以上传我的博客文件到GitHub为例</em>）。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569213128625.png" alt="blog"></p>
<p>进入 Github网站 注册一个账号并登录，新建仓库<code>Blog</code>：<a href="https://github.com/akatouXin/Blog" target="_blank" rel="noopener">https://github.com/akatouXin/Blog</a></p>
<p>点击 <code>HTTPS</code>，复制项目地址 ：<code>https://github.com/akatouXin/Blog.git</code> 备用。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569213569520.png" alt="1569213569520"></p>
<p>再回到命令行工具，一切就绪，接下来进入本文的重点。</p>
<h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><p>所谓实用主义，就是掌握了以下知识就可以玩转 <code>Git</code>，轻松应对90%以上的需求。以下是实用主义型的Git命令列表，先大致看一下</p>
<ul>
<li><code>git clone</code></li>
<li><code>git config</code></li>
<li><code>git branch</code></li>
<li><code>git checkout</code></li>
<li><code>git status</code></li>
<li><code>git add</code></li>
<li><code>git commit</code></li>
<li><code>git push</code></li>
<li><code>git pull</code></li>
<li><code>git log</code></li>
<li><code>git reflog</code></li>
<li><code>git tag</code></li>
<li><code>git reset</code></li>
<li><code>git revert</code></li>
</ul>
<p>接下来，将通过对：<a href="https://github.com/akatouXin/Blog" target="_blank" rel="noopener">https://github.com/akatouXin/Blog</a></p>
<p>仓库进行实例操作，讲解如何使用 <code>Git</code> 拉取代码到提交代码的整个流程。</p>
<h4 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h4><blockquote>
<p>从git服务器拉取代码 </p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/akatouXin/Blog.git</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/23/Git从入门到退坑/1569214083801.png" alt="1569214083801"></p>
<p>代码下载完成后在当前文件夹中会有一个 <code>Blog</code> 的目录，通过 <code>cd Blog</code> 命令进入目录。使用<code>ll -la</code> 命令可以看见有一个隐藏文件夹<code>.git</code>。<code>.git</code>中存放的就是<code>Blog</code>仓库在本地的Git信息。</p>
<h4 id="git-config"><a href="#git-config" class="headerlink" title="git config"></a>git config</h4><blockquote>
<p>配置开发者用户名和邮箱</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config user.name akatouXin </span><br><span class="line">git config user.email akatouXin@akatouXin.xom</span><br></pre></td></tr></table></figure>

<p>每次代码提交的时候都会生成一条提交记录，其中会包含当前配置的用户名和邮箱。需要注意的是，这里的用户名和邮箱与Github的用户名与邮箱没有必然联系，这里配置的用户名邮箱只仅仅是在提交信息中显示。此外，还可以用<code>git config --global</code>来配置全局用户名邮箱。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569214938189.png" alt="1569214938189"></p>
<h4 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h4><blockquote>
<p>创建、重命名、查看、删除项目分支，通过 <code>Git</code> 做项目开发时，一般都是在开发分支中进行，开发完成后合并分支到主干。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch daily/0.0.0</span><br></pre></td></tr></table></figure>

<p>创建一个名为 <code>daily/0.0.0</code> 的日常开发分支，分支名只要不包括特殊字符即可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m daily/0.0.0 daily/0.0.1</span><br></pre></td></tr></table></figure>

<p>如果觉得之前的分支名不合适，可以为新建的分支重命名，重命名分支名为 <code>daily/0.0.1</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure>

<p>通过不带参数的branch命令可以查看当前项目分支列表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d daily/0.0.1</span><br></pre></td></tr></table></figure>

<p>如果分支已经完成使命则可以通过 <code>-d</code> 参数将分支删除，这里为了继续下一步操作，暂不执行删除操作</p>
<h4 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h4><blockquote>
<p>切换分支</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout daily/0.0.1</span><br></pre></td></tr></table></figure>

<p>切换到 <code>daily/0.0.1</code> 分支，后续的操作将在这个分支上进行</p>
<h4 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h4><blockquote>
<p>查看文件变动状态</p>
</blockquote>
<p>通过任何你喜欢的编辑器对项目中的 <code>README.md</code> 文件做一些改动，保存。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>

<p>通过 <code>git status</code> 命令可以看到文件当前状态 <code>Untracked files:</code> （<em>有未被git追踪的文件或文件夹，可以通过git add 命令将变动追加到暂存区</em>）</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569216717071.png" alt="1569216717071"></p>
<h4 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h4><blockquote>
<p>添加文件变动到暂存区</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure>

<p>通过指定文件名或者指定文件夹可以将该文件添加到暂存区，如果想添加所有文件可用 <code>git add .</code> 命令，这时候可通过 <code>git status</code> 看到文件当前状态 <code>Changes to be committed:</code> （<em>文件已提交到暂存区</em>）</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569217473649.png" alt="1569217473649"></p>
<h4 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h4><blockquote>
<p>提交文件变动到版本库</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m '这里写提交原因'</span><br></pre></td></tr></table></figure>

<p>通过 <code>-m</code> 参数可直接在命令行里输入提交描述文本</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569217565387.png" alt="1569217565387"></p>
<p>提交成功后，可以使用<code>git log</code>查看履历</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569217696174.png" alt="1569217696174"></p>
<h4 id="git-push"><a href="#git-push" class="headerlink" title="git push"></a>git push</h4><blockquote>
<p>将本地的代码改动推送到服务器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<p><code>origin</code> 指代的是当前的git服务器地址，这行命令的意思是把 <code>master</code> 分支推送到服务器，当看到命令行返回如下内容表示推送成功了。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569217858409.png" alt="1569217858409"></p>
<p>现在我们回到Github网站的项目首页，就会看到刚才推送的 <code>master</code>内容了</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569217925572.png" alt="1569217925572"></p>
<h4 id="git-pull"><a href="#git-pull" class="headerlink" title="git pull"></a>git pull</h4><blockquote>
<p>将服务器上的最新代码拉取到本地</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin [分支名]</span><br></pre></td></tr></table></figure>

<p>如果其它项目成员对项目做了改动并推送到服务器，我们需要将最新的改动更新到本地，这里我们来模拟一下这种情况。</p>
<p>进入Github网站的项目首页，再进入 master 分支，在线追加 <code>README.md</code> 文件做一些修改并保存，然后在命令中执行以上命令，它将把刚才在线修改的部分拉取到本地，用编辑器打开 <code>README.md</code> ，你会发现文件已经跟线上的内容同步了。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569218592252.png" alt="1569218592252"></p>
<p><em>如果线上代码做了变动，而你本地的代码也有变动，拉取的代码就有可能会跟你本地的改动冲突，一般情况下 Git 会自动处理这种冲突合并，但如果改动的是同一行，那就需要手动来合并代码，编辑文件，保存最新的改动，再通过 git add . 和 git commit -m ‘xxx’ 来提交合并。</em></p>
<h4 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h4><blockquote>
<p>查看版本提交记录</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure>

<p>通过以上命令，我们可以查看整个项目的版本提交记录，它里面包含了<code>提交人</code>、<code>日期</code>、<code>提交原因</code>等信息，得到的结果如下：</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569218640144.png" alt="1569218640144"></p>
<p>提交记录可能会非常多，按 <code>J</code> 键往下翻，按 <code>K</code> 键往上翻，按 <code>Q</code> 键退出查看。</p>
<p>此外<code>git log</code>还有其他的参数：<code>git log --pretty=oneline</code>,<code>git log --oneline</code></p>
<p><img src="/2019/08/23/Git从入门到退坑/1569218837097.png" alt="1569218837097"></p>
<h4 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h4><p><code>reflog</code> 可以查看所有分支的所有操作记录（包括commit和reset的操作、已经被删除的commit记录，跟 <code>git log</code> 的区别在于它不能查看已经删除了的commit记录。</p>
<h4 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h4><blockquote>
<p>为项目标记标签，便于分类查看</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git tag master/0.0.1</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>

<p>当我们完成某个功能需求准备发布上线时，应该将此次完整的项目代码做个标记，并将这个标记好的版本发布到线上，这里我们以 <code>master/0.0.1</code> 为标记名并发布，当看到命令行返回如下内容则表示发布成功了</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569220199297.png" alt="1569220199297"></p>
<h4 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h4><blockquote>
<p>将当前的分支重设（reset）到指定的 <code>&lt;commit&gt;</code> 或者 <code>HEAD</code>   （相当于移动HEAD指针）</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --mixed &lt;commit_id&gt;</span><br></pre></td></tr></table></figure>

<p><code>--mixed</code> 是不带参数时的默认参数，它退回到某个版本，保留文件内容，回退提交历史。相当于在本地库和暂存区移动指针，将版本后退或者向前移动，但是工作区的文件并不会随之移动。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --soft &lt;commit_id&gt;</span><br></pre></td></tr></table></figure>

<p>暂存区和工作区中的内容不作任何改变，仅仅把 <code>HEAD</code> 指向 <code>&lt;commit_id&gt;</code>那次提交，只是将本地库的版本做变动，暂存区与工作区没有变动。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;commit_id&gt;</span><br></pre></td></tr></table></figure>

<p>自从 <code>&lt;commit_id&gt;</code> 以来在工作区中的任何改变都被丢弃，并把 <code>HEAD</code> 指向 <code>&lt;commit_id&gt;</code>那次提交。<code>--hard</code>命令是同步本地库，暂存区，工作区到<code>&lt;commit_id&gt;</code>对应的版本。<strong>这个才是最常用的参数</strong>。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569227073758.png" alt="1569227073758"></p>
<h4 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h4><blockquote>
<p>撤销某次操作，此次操作之前和之后的 <code>commit</code> 和 <code>history</code> 都会保留，并且把这次撤销作为一次最新的提交，<strong><em>和<code>git reset</code>的方式回滚不一致的是，<code>git revert</code>仅仅是撤销某一次记录，并且把撤销动作作为新记录提交，该当记录前后的提交不改变。<code>git reset</code>重置的<code>HEAD</code>指向某一条记录，会将该当记录之后的也会被重置。</em></strong></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert HEAD</span><br></pre></td></tr></table></figure>

<p>撤销前一次提交操作</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert HEAD --no-edit</span><br></pre></td></tr></table></figure>

<p>撤销前一次提交操作，并以默认的 <code>Revert &quot;xxx&quot;</code> 为提交原因</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git revert -n HEAD</span><br></pre></td></tr></table></figure>

<p>需要撤销多次操作的时候加 <code>-n</code> 参数，这样不会每次撤销操作都提交，而是等所有撤销都完成后一起提交</p>
<p>撤销最近的一次：<img src="/2019/08/23/Git从入门到退坑/1569226478627.png" alt="1569226478627"></p>
<p>提交以后，远程仓库回滚：<img src="/2019/08/23/Git从入门到退坑/1569226646688.png" alt="1569226646688"></p>
<p>本地工作区回滚：<img src="/2019/08/23/Git从入门到退坑/1569226709634.png" alt="1569226709634"></p>
<h4 id="gitignore"><a href="#gitignore" class="headerlink" title=".gitignore"></a>.gitignore</h4><blockquote>
<p>设置哪些内容不需要推送到服务器，这是一个配置文件</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch .gitignore</span><br></pre></td></tr></table></figure>

<p><code>.gitignore</code> 不是 <code>Git</code> 命令，而在项目中的一个文件，通过设置 <code>.gitignore</code> 的内容告诉 <code>Git</code> 哪些文件应该被忽略不需要推送到服务器，通过以上命令可以创建一个 <code>.gitignore</code> 文件，并在编辑器中打开文件，每一行代表一个要忽略的文件或目录，如：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.deploy_git/</span><br></pre></td></tr></table></figure>

<p>以上内容的意思是 <code>Git</code> 将忽略 <code>.deploy_git/</code> 目录，这些内容不会被推送到服务器上</p>
<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>通过掌握以上这些基本命令就可以在项目中开始用起来了，如果追求实用，那关于 <code>Git</code> 的学习就可以到此结束了，偶尔遇到的问题也基本上通过 <code>Google</code>,<code>baidu</code> 也能找到答案，如果想深入探索 <code>Git</code> 的高阶功能，那就继续往下看 <code>深入探索</code> 部分。<strong>结合<a href="https://learngitbranching.js.org/" target="_blank" rel="noopener">在线练习</a>网站进行练习。←很重要</strong><br><img src="/2019/08/23/Git从入门到退坑/demo.gif" alt="demo"></p>
<h2 id="深入探索"><a href="#深入探索" class="headerlink" title="深入探索"></a>深入探索</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><h4 id="工作区（Working-Directory）"><a href="#工作区（Working-Directory）" class="headerlink" title="工作区（Working Directory）"></a>工作区（<em>Working Directory</em>）</h4><p>就是你在电脑里能看到的目录，比如上文中的 <code>Blog</code> 文件夹就是一个工作区</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569221825595.png" alt="1569221825595"></p>
<h4 id="本地版本库（Local-Repository）"><a href="#本地版本库（Local-Repository）" class="headerlink" title="本地版本库（Local Repository）"></a>本地版本库（<em>Local Repository</em>）</h4><p>工作区有一个隐藏目录 <code>.git</code>，这个不算工作区，而是 <code>Git</code> 的版本库。</p>
<p><img src="/2019/08/23/Git从入门到退坑/wp.jpeg" alt="img"></p>
<h4 id="暂存区（stage）"><a href="#暂存区（stage）" class="headerlink" title="暂存区（stage）"></a>暂存区（<em>stage</em>）</h4><p>本地版本库里存了很多东西，其中最重要的就是称为 <code>stage</code>（或者叫index）的暂存区，还有 <code>Git</code> 为我们自动创建的第一个分支 <code>master</code>，以及指向 <code>master</code> 的一个指针叫 <code>HEAD</code>。</p>
<h4 id="远程版本库（Remote-Repository）"><a href="#远程版本库（Remote-Repository）" class="headerlink" title="远程版本库（Remote Repository）"></a>远程版本库（<em>Remote Repository</em>）</h4><p>一般指的是 <code>Git</code> 服务器上所对应的仓库，本文的示例所在的<code>github</code>仓库就是一个远程版本库</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569217925572.png" alt="1569217925572"></p>
<h4 id="以上概念之间的关系"><a href="#以上概念之间的关系" class="headerlink" title="以上概念之间的关系"></a>以上概念之间的关系</h4><p><code>工作区</code>、<code>暂存区</code>、<code>本地版本库</code>、<code>远程版本库</code>之间几个常用的 <code>Git</code> 操作流程如下图所示：</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569222180677.png" alt="1569222180677"></p>
<h4 id="分支（Branch）"><a href="#分支（Branch）" class="headerlink" title="分支（Branch）"></a>分支（<em>Branch</em>）</h4><p>分支是为了将修改记录的整个流程分开存储，让分开的分支不受其它分支的影响，所以在同一个数据库里可以同时进行多个不同的修改</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569222245975.png" alt="1569222245975"></p>
<h4 id="主分支（Master）"><a href="#主分支（Master）" class="headerlink" title="主分支（Master）"></a>主分支（<em>Master</em>）</h4><p>前面提到过 <code>master</code> 是 <code>Git</code> 为我们自动创建的第一个分支，也叫主分支，其它分支开发完成后都要合并到 <code>master</code></p>
<p><img src="/2019/08/23/Git从入门到退坑/1569222348141.png" alt="1569222348141"></p>
<h4 id="标签（Tag）"><a href="#标签（Tag）" class="headerlink" title="标签（Tag）"></a>标签（<em>Tag</em>）</h4><p>标签是用于标记特定的点或提交的历史，通常会用来标记发布版本的名称或版本号（如：<code>master/1.0），虽然标签看起来有点像分支，但打上标签的提交是固定的，不能随意的改动，参见上图中的</code>1.0<code>/</code>2.0<code>/</code>3.0<code>。一般在</code>git flow 工作流<code>的</code>Release`版本中使用比较多</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569222560928.png" alt="1569222560928"></p>
<h4 id="HEAD"><a href="#HEAD" class="headerlink" title="HEAD"></a>HEAD</h4><p><code>HEAD</code> 指向的就是当前分支的最新提交</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569222594915.png" alt="1569222594915"></p>
<blockquote>
<p>以上概念了解的差不多，那就可以继续往下看，下面将以具体的操作类型来讲解 <code>Git</code> 的高阶用法</p>
</blockquote>
<h3 id="操作文件"><a href="#操作文件" class="headerlink" title="操作文件"></a>操作文件</h3><h4 id="git-add-1"><a href="#git-add-1" class="headerlink" title="git add"></a>git add</h4><blockquote>
<p>添加文件到暂存区</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add -i</span><br></pre></td></tr></table></figure>

<p>通过此命令将打开交互式子命令系统，你将看到如下子命令</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569222700186.png" alt="1569222700186"></p>
<p>通过输入序列号或首字母可以选择相应的功能，具体的功能解释如下：</p>
<ul>
<li><code>status</code>：功能上和 <code>git add -i</code> 相似，没什么鸟用</li>
<li><code>update</code>：详见下方 <code>git add -u</code></li>
<li><code>revert</code>：把已经添加到暂存区的文件从暂存区剔除，其操作方式和 <code>update</code> 类似</li>
<li><code>add untracked</code>：可以把新增的文件添加到暂存区，其操作方式和 <code>update</code> 类似</li>
<li><code>patch</code>：详见下方 <code>git add -p</code></li>
<li><code>diff</code>：比较暂存区文件和本地版本库的差异，其操作方式和 <code>update</code> 类似</li>
<li><code>quit</code>：退出 <code>git add -i</code> 命令系统</li>
<li><code>help</code>：查看帮助信息</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add -p</span><br></pre></td></tr></table></figure>

<p>直接进入交互命令中最有用的 <code>patch</code> 模式</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569222909837.png" alt="1569222909837"></p>
<p>这是交互命令中最有用的模式，其操作方式和 <code>update</code> 类似，选择后 <code>Git</code> 会显示这些文件的当前内容与本地版本库中的差异，然后您可以自己决定是否添加这些修改到暂存区，在命令行 <code>Stage deletion [y,n,q,a,d,/,?]?</code> 后输入 <code>y,n,q,a,d,/,?</code> 其中一项选择操作方式，具体功能解释如下：</p>
<ul>
<li>y：接受修改</li>
<li>n：忽略修改</li>
<li>q：退出当前命令</li>
<li>a：添加修改</li>
<li>d：放弃修改</li>
<li>/：通过正则表达式匹配修改内容</li>
<li>?：查看帮助信息</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add -u</span><br></pre></td></tr></table></figure>

<p>直接进入交互命令中的 <code>update</code> 模式</p>
<p>它会先列出工作区 <code>修改</code> 或 <code>删除</code> 的文件列表，<code>新增</code> 的文件不会被显示，在命令行 <code>Update&gt;&gt;</code> 后输入相应的列表序列号表示选中该项，回车继续选择，如果已选好，直接回车回到命令主界面</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add --ignore-removal .</span><br></pre></td></tr></table></figure>

<p>添加工作区 <code>修改</code> 或 <code>新增</code> 的文件列表， <code>删除</code> 的文件不会被添加</p>
<h4 id="git-commit-1"><a href="#git-commit-1" class="headerlink" title="git commit"></a>git commit</h4><blockquote>
<p>把暂存区的文件提交到本地版本库</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m '第一行提交信息'  -m '第二行提交信息'</span><br></pre></td></tr></table></figure>

<p>不打开编辑器，直接在命令行中输入多行提交信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -am '提交信息'</span><br></pre></td></tr></table></figure>

<p>将工作区 <code>修改</code> 或 <code>删除</code> 的文件提交到本地版本库， <code>新增</code> 的文件不会被提交</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend -m '提交信息'</span><br></pre></td></tr></table></figure>

<p>修改最新一条提交记录的提交原因</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -C HEAD</span><br></pre></td></tr></table></figure>

<p>将当前文件改动提交到 <code>HEAD</code> 或当前分支的历史ID</p>
<h4 id="git-mv"><a href="#git-mv" class="headerlink" title="git mv"></a>git mv</h4><blockquote>
<p>移动或重命名文件、目录</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git mv README.md README_Zh-CN.md -f</span><br></pre></td></tr></table></figure>

<p>将 <code>README.md</code> 重命名为 <code>README_Zh-CN.md</code> ，同时添加变动到暂存区，加 <code>-f</code> 参数可以强制重命名，相比用 <code>mv README.md README_Zh-CN.md</code> 命令省去了 <code>git add</code> 操作</p>
<h4 id="git-rm"><a href="#git-rm" class="headerlink" title="git rm"></a>git rm</h4><blockquote>
<p>从工作区和暂存区移除文件</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm b.md</span><br></pre></td></tr></table></figure>

<p>从工作区和暂存区移除文件 <code>b.md</code> ，同时添加变动到暂存区，相比用 <code>rm b.md</code> 命令省去了 <code>git add</code> 操作</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm src/ -r</span><br></pre></td></tr></table></figure>

<p>允许从工作区和暂存区移除目录，删除文件夹目录。</p>
<h4 id="git-status-1"><a href="#git-status-1" class="headerlink" title="git status"></a>git status</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status -s</span><br></pre></td></tr></table></figure>

<p>以简短方式查看工作区和暂存区文件状态，示例如下：</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569223294955.png" alt="1569223294955"></p>
<p>查看工作区和暂存区文件状态，包括被忽略的文件</p>
<h3 id="操作分支"><a href="#操作分支" class="headerlink" title="操作分支"></a>操作分支</h3><h4 id="git-branch-1"><a href="#git-branch-1" class="headerlink" title="git branch"></a>git branch</h4><blockquote>
<p>查看、创建、删除分支</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a</span><br></pre></td></tr></table></figure>

<p>查看本地版本库和远程版本库上的分支列表（绿色为本地当前分支，红色为远程分支）</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569223702482.png" alt="1569223702482"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -r</span><br></pre></td></tr></table></figure>

<p>查看远程版本库上的分支列表，加上 <code>-d</code> 参数可以删除远程版本库上的分支<img src="/2019/08/23/Git从入门到退坑/1569223668134.png" alt="1569223668134"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D</span><br></pre></td></tr></table></figure>

<p>分支未提交到本地版本库前强制删除分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -vv</span><br></pre></td></tr></table></figure>

<p>查看带有最后提交id、最近提交原因等信息的本地版本库分支列表<img src="/2019/08/23/Git从入门到退坑/1569223765943.png" alt="1569223765943"></p>
<h4 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h4><blockquote>
<p>将其它分支合并到当前分支</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --squash</span><br></pre></td></tr></table></figure>

<p>将待合并分支上的 <code>commit</code> 合并成一个新的 <code>commit</code> 放入当前分支，适用于待合并分支的提交记录不需要保留的情况，适用于将主分支内容merge回分分支。<strong>一般使用不到</strong>。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569223893332.png" alt="1569223893332"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --no-ff</span><br></pre></td></tr></table></figure>

<p>默认情况下，<code>Git</code> 执行”<code>快进式合并</code>“（fast-farward merge），会直接将 <code>Master</code> 分支指向 <code>Develop</code> 分支，使用 <code>--no-ff</code> 参数后，会执行正常合并，在 <code>Master</code> 分支上生成一个新节点，保证版本演进更清晰。<strong>推荐使用</strong>。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569224004969.png" alt="1569224004969"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --no-edit</span><br></pre></td></tr></table></figure>

<p>在没有冲突的情况下合并，不想手动编辑提交原因，而是用 <code>Git</code> 自动生成的类似 <code>Merge branch &#39;test&#39;</code>的文字直接提交，<strong>不推荐使用</strong>。</p>
<h4 id="git-checkout-1"><a href="#git-checkout-1" class="headerlink" title="git checkout"></a>git checkout</h4><blockquote>
<p>切换分支</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b [分支名]</span><br></pre></td></tr></table></figure>

<p>创建 <code>[分支名]</code> 分支，同时切换到这个新创建的分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout HEAD [文件名]</span><br></pre></td></tr></table></figure>

<p>从本地版本库的 <code>HEAD</code>（也可以是提交ID、分支名、Tag名） 历史中检出 <code>[文件名]</code> 覆盖当前工作区的文件，如果省略 <code>HEAD</code> 则是从暂存区检出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout --orphan new_branch名</span><br></pre></td></tr></table></figure>

<p>这个命令会创建一个全新的，完全没有历史记录的新分支，但当前源分支上所有的最新文件都还在，真是强迫症患者的福音，但这个新分支必须做一次 <code>git commit</code> 操作后才会真正成为一个新分支。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -p other_branch</span><br></pre></td></tr></table></figure>

<p>这个命令主要用来比较两个分支间的差异内容，并提供交互式的界面来选择进一步的操作，这个命令不仅可以比较两个分支间的差异，还可以比较单个文件的差异。</p>
<h4 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h4><blockquote>
<p>在 <code>Git</code> 的栈中保存当前修改或删除的工作进度，当你在一个分支里做某项功能开发时，接到通知把昨天已经测试完没问题的代码发布到线上，但这时你已经在这个分支里加入了其它未提交的代码，这个时候就可以把这些未提交的代码存到栈里。<strong><em>stash命令正常开发中，使用频率不大。</em></strong></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/23/Git从入门到退坑/1569224361033.png" alt="1569224361033"></p>
<p>将未提交的文件保存到Git栈中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure>

<p><img src="/2019/08/23/Git从入门到退坑/1569224434747.png" alt="1569224434747"></p>
<p>查看栈中保存的列表</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash show stash@&#123;0&#125;</span><br></pre></td></tr></table></figure>

<p>显示栈中其中一条记录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash drop stash@&#123;0&#125;</span><br></pre></td></tr></table></figure>

<p>移除栈中其中一条记录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure>

<p>从Git栈中检出最新保存的一条记录，并将它从栈中移除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply stash@&#123;0&#125;</span><br></pre></td></tr></table></figure>

<p>从Git栈中检出其中一条记录，但不从栈中移除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash branch new_banch</span><br></pre></td></tr></table></figure>

<p>把当前栈中最近一次记录检出并创建一个新分支</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash clear</span><br></pre></td></tr></table></figure>

<p>清空栈里的所有记录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash create</span><br></pre></td></tr></table></figure>

<p>为当前修改或删除的文件创建一个自定义的栈并返回一个ID，此时并未真正存储到栈里</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash store xxxxxx</span><br></pre></td></tr></table></figure>

<p>将 <code>create</code> 方法里返回的ID放到 <code>store</code> 后面，此时在栈里真正创建了一个记录，但当前修改或删除的文件并未从工作区移除</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span> git stash create 09eb9a97ad632d0825be1ece361936d1d0bdb5c7  （创建自定义栈，但没有储存）</span><br><span class="line"><span class="meta">$</span> git stash store 09eb9a97ad632d0825be1ece361936d1d0bdb5c7   （储存）</span><br><span class="line"><span class="meta">$</span> git stash list                                             （查看）</span><br><span class="line">  stash@&#123;0&#125;: Created via "git stash store".</span><br></pre></td></tr></table></figure>

<h3 id="操作历史"><a href="#操作历史" class="headerlink" title="操作历史"></a>操作历史</h3><h4 id="git-log-1"><a href="#git-log-1" class="headerlink" title="git log"></a>git log</h4><blockquote>
<p>显示提交历史记录</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -p</span><br></pre></td></tr></table></figure>

<p>显示带提交差异对比的历史记录，分页的时候，按<code>空格</code>翻页。</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569224975517.png" alt="1569224975517"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log [具体文件名]</span><br></pre></td></tr></table></figure>

<p>显示 <code>具体文件</code> 文件的历史记录</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569225331181.png" alt="1569225331181"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --since="2 weeks ago"</span><br></pre></td></tr></table></figure>

<p>显示2周前开始到现在的历史记录，其它时间可以类推</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --before="2 weeks ago"</span><br></pre></td></tr></table></figure>

<p>显示截止到2周前的历史记录，其它时间可以类推</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log -10</span><br></pre></td></tr></table></figure>

<p>显示最近10条历史记录</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569225646363.png" alt="1569225646363"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log f5f630a..HEAD</span><br></pre></td></tr></table></figure>

<p>显示从提交ID <code>f5f630a</code> 到 <code>HEAD</code> 之间的记录，<code>HEAD</code> 可以为空或其它提交ID</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569225753374.png" alt="1569225753374"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=oneline</span><br></pre></td></tr></table></figure>

<p>在一行中输出简短的历史记录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=format:"%h"</span><br></pre></td></tr></table></figure>

<p>格式化输出历史记录</p>
<p><code>Git</code> 用各种 <code>placeholder</code> 来决定各种显示内容，我挑几个常用的显示如下：</p>
<ul>
<li>%H: commit hash</li>
<li>%h: 缩短的commit hash</li>
<li>%T: tree hash</li>
<li>%t: 缩短的 tree hash</li>
<li>%P: parent hashes</li>
<li>%p: 缩短的 parent hashes</li>
<li>%an: 作者名字</li>
<li>%aN: mailmap的作者名</li>
<li>%ae: 作者邮箱</li>
<li>%ad: 日期 (–date= 制定的格式)</li>
<li>%ar: 日期, 相对格式(1 day ago)</li>
<li>%cn: 提交者名字</li>
<li>%ce: 提交者 email</li>
<li>%cd: 提交日期 (–date= 制定的格式)</li>
<li>%cr: 提交日期, 相对格式(1 day ago)</li>
<li>%d: ref名称</li>
<li>%s: commit信息标题</li>
<li>%b: commit信息内容</li>
<li>%n: 换行</li>
</ul>
<h4 id="git-cherry-pick"><a href="#git-cherry-pick" class="headerlink" title="git cherry-pick"></a>git cherry-pick</h4><blockquote>
<p>合并分支的一条或几条提交记录到当前分支末梢，<strong><em>不常用</em></strong></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick 170a305</span><br></pre></td></tr></table></figure>

<p>合并提交ID <code>170a305</code> 到当前分支末梢</p>
<h4 id="git-rebase"><a href="#git-rebase" class="headerlink" title="git rebase"></a>git rebase</h4><blockquote>
<p>重新定义分支的版本库状态</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rebase branch_name</span><br></pre></td></tr></table></figure>

<p>合并分支，这跟 <code>merge</code> 很像，但还是有本质区别，看下图：（<strong>最终版本中，历史记录中排序不一样</strong>）</p>
<p><img src="/2019/08/23/Git从入门到退坑/1569225845088.png" alt="1569225845088"></p>
<p>合并过程中可能需要先解决冲突，然后执行 <code>git rebase --continue</code></p>
<h4 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h4><blockquote>
<p>查看工作区、暂存区、本地版本库之间的文件差异，用一张图来解释</p>
</blockquote>
<p><img src="/2019/08/23/Git从入门到退坑/1569227190985.png" alt="1569227190985"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --stat</span><br></pre></td></tr></table></figure>

<p>通过 <code>--stat</code> 参数可以查看变更统计数据<img src="/2019/08/23/Git从入门到退坑/1569227417341.png" alt="1569227417341"></p>
<h3 id="远程版本库连接"><a href="#远程版本库连接" class="headerlink" title="远程版本库连接"></a>远程版本库连接</h3><p>如果在GitHub项目初始化之前，文件已经存在于本地目录中，那可以在本地初始化本地版本库，再将本地版本库跟远程版本库连接起来</p>
<h4 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h4><blockquote>
<p>在本地目录内部会生成.git文件夹</p>
</blockquote>
<h4 id="git-remote"><a href="#git-remote" class="headerlink" title="git remote"></a>git remote</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure>

<p>不带参数，列出已经存在的远程分支，加上 <code>-v</code> 列出详细信息，在每一个名字后面列出其远程url</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://github.com/akatouXin/Blog.git</span><br></pre></td></tr></table></figure>

<p>添加一个新的远程仓库，指定一个名字，以便引用后面带的URL，可以表示把<code>本地仓库</code>与<code>远程仓库</code>建立联系。</p>
<h4 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h4><blockquote>
<p>将远程版本库的更新取回到本地版本库</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git fetch origin develop_RB</span><br></pre></td></tr></table></figure>

<p>默认情况下，<code>git fetch</code> 取回所有分支的更新。如果只想取回特定分支的更新，可以指定分支名。<code>git fetch</code>只是同步了本地仓库与远程仓库，工作区没有变化。工作区要想同步，需要通过切换分支<code>git checkout</code>和拉取代码<code>git pull</code></p>
<h3 id="问题排查"><a href="#问题排查" class="headerlink" title="问题排查"></a>问题排查</h3><h4 id="git-blame"><a href="#git-blame" class="headerlink" title="git blame"></a>git blame</h4><blockquote>
<p>查看文件每行代码块的历史信息</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git blame -L 1,10 demo.html</span><br></pre></td></tr></table></figure>

<p>截取 <code>demo.html</code> 文件1-10行历史信息</p>
<h4 id="git-bisect"><a href="#git-bisect" class="headerlink" title="git bisect"></a>git bisect</h4><blockquote>
<p>二分查找历史记录，排查BUG</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git bisect start</span><br></pre></td></tr></table></figure>

<p>开始二分查找</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git bisect bad</span><br></pre></td></tr></table></figure>

<p>标记当前二分提交ID为有问题的点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git bisect good</span><br></pre></td></tr></table></figure>

<p>标记当前二分提交ID为没问题的点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git bisect reset</span><br></pre></td></tr></table></figure>

<p>查到有问题的提交ID后回到原分支</p>
<h3 id="更多操作"><a href="#更多操作" class="headerlink" title="更多操作"></a>更多操作</h3><h4 id="git-submodule"><a href="#git-submodule" class="headerlink" title="git submodule"></a>git submodule</h4><blockquote>
<p>通过 Git 子模块可以跟踪外部版本库，它允许在某一版本库中再存储另一版本库，并且能够保持2个版本库完全独立</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add https://github.com/akatouXin/akatouxin.github.io.git public</span><br></pre></td></tr></table></figure>

<p>将 <code>demo</code> 仓库添加为子模块</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule update public</span><br></pre></td></tr></table></figure>

<p>更新子模块 <code>demo</code></p>
<h4 id="git-gc"><a href="#git-gc" class="headerlink" title="git gc"></a>git gc</h4><blockquote>
<p>运行Git的垃圾回收功能，清理冗余的历史快照</p>
</blockquote>
<h4 id="git-archive"><a href="#git-archive" class="headerlink" title="git archive"></a>git archive</h4><blockquote>
<p>将加了tag的某个版本打包提取</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git archive -v --format=zip v0.1 &gt; v0.1.zip</span><br></pre></td></tr></table></figure>

<p><code>--format</code> 表示打包的格式，如 <code>zip</code>，<code>-v</code> 表示对应的tag名，后面跟的是tag名，如 <code>v0.1</code>。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文只是对 <code>Git</code> 的所有功能中的部分实用功能做了一次探秘，Git非常强大，还有很多功能有待我们去发现，限于本文篇幅，咱就此打住吧，预知更多好用功能，请善用谷歌。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><blockquote>
<ul>
<li>Git官方的<a href="https://git-scm.com/book/en/v2" target="_blank" rel="noopener">Git Pro</a>电子书</li>
<li><a href="https://git-scm.com/docs" target="_blank" rel="noopener">Git Doc</a></li>
<li><a href="https://www.runoob.com/git/git-tutorial.html" target="_blank" rel="noopener">Git 教程</a>| 菜鸟教程</li>
</ul>
</blockquote>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>羅小生</span>
                    </p>
                
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tag/Git/"># Git</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2019/08/24/虚拟机中固定IP配置/">虚拟机中固定IP配置</a>
            
            
            <a class="next" rel="next" href="/2019/02/24/中文系统下的日语配列键盘安装/">中文系统下的日语配列键盘安装</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© <a href="https://akatouxin.github.io/about/" target="_blank">羅小生</a> | <a href="https://github.com/akatouXin" target="_blank">人若无名，则潜心练剑.</a></span>
    </div>
</footer>

    </div>
</body>
</html>
